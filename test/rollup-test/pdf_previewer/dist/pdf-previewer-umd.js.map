{"version":3,"file":"pdf-previewer-umd.js","sources":["../src/pdf-previewer.js","../src/index.js"],"sourcesContent":["/*!\r\n * A lib for pdf previewing based on `PDF.js` created by Mozilla\r\n * `PDF.js` should be loaded and mounted to root\r\n * NOTICE: 100+ pages maybe ok - - no lazy load now\r\n * hentai | 05/31/2017\r\n */\r\n\r\nimport './libs/pdf.js';\r\nimport './libs/pdf.worker.js';\r\n\r\n// helpers\r\nvar slice = Array.prototype.slice;\r\nvar noop = function() { }\r\n\r\nvar shallowExtend = function shallowExtend(tar/*, obj1, obj2, ... */) {\r\n  var objs = slice.call(arguments, 1);\r\n\r\n  objs.forEach(function(obj) {\r\n    if (typeof obj !== 'object' && obj !== null) {\r\n      return ;\r\n    }\r\n    Object.keys(obj).forEach(function(prop) {\r\n      tar[prop] = obj[prop];\r\n    });\r\n  });\r\n\r\n  return tar;\r\n}\r\n\r\nvar getStyleValue = function($node, styleName) {\r\n  return getComputedStyle($node)[styleName];\r\n}\r\n\r\nvar removePx = function(x) {\r\n  return x.slice(0, -2);\r\n}\r\n\r\n// simple `finally` pollyfill\r\nif (!('finally' in Promise.prototype)) {\r\n  Promise.prototype.finally = function(cb) {\r\n    return this.then(cb, cb);\r\n  }\r\n}\r\n\r\nvar loadPdfDocument = function loadPdfDocument(src) {\r\n  return pdfjs.getDocument(src);\r\n}\r\n\r\nvar handlePdfDocument = function handlePdfDocument(doc) {\r\n  return new Promise(function(resolve, reject) {\r\n    var curPage = 1;\r\n    var loadedPageCnt = 0;\r\n    var pdf$ = { info: doc, pages: { } };\r\n    var errors = null;\r\n\r\n    while(curPage <= doc.numPages) {\r\n      doc.getPage(curPage)\r\n        .then(function(page) {\r\n          pdf$.pages[page.pageNumber] = page;\r\n        })\r\n        .catch(function(err) {\r\n          if (!Array.isArray(errors)) {\r\n            errors = [ ]\r\n          }\r\n          errors.push(err);\r\n        })\r\n        .finally(function() {\r\n          if (++ loadedPageCnt === doc.numPages) {\r\n            resolve({ errors: errors, pdf$: pdf$ });\r\n          }\r\n        });\r\n\r\n      ++ curPage;\r\n    }\r\n  }).then(function(res) {\r\n    if (res.errors) {\r\n      throw res.errors;\r\n    }\r\n    return res.pdf$;\r\n  });\r\n}\r\n\r\nvar getRenderedPdfCore = function getRenderedPdfCore(pdf, isError) {\r\n\r\n  var $el = document.createElement('div');\r\n  $el.classList.add('pdf-previewer-wrapper');\r\n\r\n  if (isError) {\r\n    return $el;\r\n  }\r\n\r\n  var innerHTML = '<ul class=\"page-list\">';\r\n  var curPage = 1;\r\n\r\n  while(curPage <= pdf.info.numPages) {\r\n    innerHTML += '<li class=\"page-list-item\" data-page-number=\"' +\r\n      pdf.pages[curPage].pageNumber +\r\n      '\"><canvas></canvas></li>';\r\n\r\n    ++ curPage;\r\n  }\r\n\r\n  innerHTML += '</ul>';\r\n\r\n  $el.innerHTML = innerHTML;\r\n\r\n  return $el;\r\n}\r\n\r\n/**\r\n * set up Constructor & its prototype\r\n */\r\nvar PDFPreviewer = function(opts) {\r\n\r\n  var defaults = {\r\n    $container: document.body,\r\n    pdfPath: 'compressed.tracemonkey-pldi-09.pdf',\r\n    boundResize: true,\r\n    onLoadAll: noop,\r\n    onError: noop\r\n  };\r\n\r\n\r\n  if (!(this instanceof PDFPreviewer)) {\r\n    return PDFPreviewer.of(opts);\r\n  }\r\n  this.opts = shallowExtend({ }, defaults, opts);\r\n  this.src = this.opts.pdfPath;\r\n\r\n  this.pdf$ = { };\r\n  if (this.opts.boundResize) {\r\n    window.addEventListener('resize', this.refreshPages.bind(this));\r\n  }\r\n\r\n  return this;\r\n}\r\n\r\nPDFPreviewer.of = function(opts) {\r\n  return new PDFPreviewer(opts);\r\n}\r\n\r\nvar proto = PDFPreviewer.prototype = {\r\n  constructor: PDFPreviewer\r\n}\r\n\r\nproto.init = function() {\r\n  return loadPdfDocument(this.src)\r\n    .then(handlePdfDocument)\r\n    .then(this.onLoadAll.bind(this))\r\n    .catch(this.opts.onError.bind(this));\r\n}\r\n\r\nproto.onLoadAll = function(pdf$) {\r\n  this.pdf$ = pdf$;\r\n  this.loaded = true;\r\n\r\n  this\r\n    .mount()\r\n    .refreshPages()\r\n    .opts.onLoadAll.call(this);\r\n}\r\n\r\nproto.resetPdf$ = function() {\r\n  this.pdf$ = { };\r\n  return this;\r\n}\r\n\r\nproto.checkValid = function() {\r\n  return (\r\n    this.loaded &&\r\n    typeof this.pdf$.info === 'object' &&\r\n    typeof this.pdf$.pages === 'object'\r\n  );\r\n}\r\n\r\nproto.isValidNumPages = function(numPages) {\r\n  numPages = Number(numPages);\r\n  return !Number.isNaN(numPages) && numPages !== 0;\r\n}\r\n\r\nproto.isValidNumPage = function(numPage) {\r\n  if (!this.checkValid()) {\r\n    return false;\r\n  }\r\n  return this.isValidNumPages(numPage) &&\r\n    numPage <= this.pdf$.info.numPages;\r\n}\r\n\r\nproto.getRenderedPdf = function() {\r\n  if (\r\n    !this.checkValid() ||\r\n    !this.isValidNumPages(this.pdf$.info.numPages)\r\n  ) {\r\n    return getRenderedPdfCore(this.pdf$, true);\r\n  }\r\n\r\n  return getRenderedPdfCore(this.pdf$);\r\n}\r\n\r\nproto.mount = function(replace) {\r\n  if (replace) {\r\n    this.opts.$container.innerHTML = '';\r\n  }\r\n  var $el = this.$el = this.getRenderedPdf();\r\n  this.opts.$container.appendChild($el);\r\n\r\n  return this;\r\n}\r\n\r\nproto.toPage = function(num) {\r\n  num = Number(num);\r\n  if (!this.isValidNumPage(num)) {\r\n    return this;\r\n  }\r\n\r\n  var $selectedEl = this.$el.querySelector(\r\n    '.page-list-item[data-page-number=\"' + num + '\"]'\r\n  );\r\n\r\n  if (!$selectedEl) {\r\n    return this;\r\n  }\r\n\r\n  this.opts.$container.scrollTop = $selectedEl.offsetTop;\r\n\r\n  return this;\r\n}\r\n\r\nproto.refreshPages = function() {\r\n  if (!this.checkValid()) {\r\n    return this;\r\n  }\r\n\r\n  slice.call(\r\n    this.$el.querySelectorAll('.page-list .page-list-item')\r\n  )\r\n    .forEach(function handle$page($page) {\r\n\r\n      var pageNumber = $page.dataset['pageNumber'];\r\n\r\n      this.renderPage(\r\n        this.pdf$.pages[pageNumber],\r\n        $page.querySelector('canvas')\r\n      );\r\n\r\n    }.bind(this));\r\n\r\n  return this;\r\n}\r\n\r\nproto.renderPage = function(page, $canvas) {\r\n  var width = removePx(getStyleValue(this.opts.$container, 'width'));\r\n  var initialScale = 1;\r\n  var viewport = page.getViewport(initialScale);\r\n\r\n  var viewportWidth = viewport.width;\r\n  var viewportHeight = viewport.height;\r\n\r\n  var realScale = this.realScale = (width / viewportWidth).toFixed(2);\r\n\r\n  viewport = page.getViewport(realScale);\r\n\r\n  var ctx = $canvas.getContext('2d');\r\n  $canvas.width = viewport.width;\r\n  $canvas.height = viewport.height;\r\n\r\n  var renderCtx = {\r\n    canvasContext: ctx,\r\n    viewport: viewport\r\n  }\r\n\r\n  page.render(renderCtx);\r\n\r\n  return this;\r\n}\r\n\r\nproto.changeSrc = function(src) {\r\n  this.src = src;\r\n\r\n  return loadPdfDocument(this.src)\r\n    .then(handlePdfDocument)\r\n    .then(function(pdf$) {\r\n      if (this.$el) {\r\n        this.opts.$container.removeChild(this.$el);\r\n      }\r\n      this.onLoadAll(pdf$);\r\n    }.bind(this))\r\n    .catch(this.opts.onError.bind(this));\r\n}\r\n\r\nexport default PDFPreviewer;\r\n","/*!\r\n * A lib for pdf previewing based on `PDF.js` created by Mozilla\r\n * `PDF.js` should be loaded and mounted to root\r\n * NOTICE: 100+ pages maybe ok - - no lazy load now\r\n * hentai | 05/31/2017\r\n */\r\n\r\nimport PDFPreviewer from './pdf-previewer.js';\r\n\r\nexport default PDFPreviewer;\r\n"],"names":["PDFPreviewer"],"mappings":"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"}